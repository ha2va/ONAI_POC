{% extends 'base.html' %}
{% block content %}
<h1>Tariff</h1>
<form method="get">
    Route ID <input type="number" name="route_id" value="{{ request.args.get('route_id','') }}">
    Route
    <select name="route_select">
        <option value="">-- All --</option>
        {% for r in routes %}
            <option value="{{ r['id'] }}" {% if request.args.get('route_select') == r['id']|string %}selected{% endif %}>{{ r['origin_name'] }} - {{ r['destination_name'] }}</option>
        {% endfor %}
    </select>
    Valid From <input type="date" name="valid_from" value="{{ request.args.get('valid_from','') }}">
    Valid To <input type="date" name="valid_to" value="{{ request.args.get('valid_to','') }}">
    <input type="submit" value="Search">
    <a href="{{ url_for('tariffs.new_tariff') }}">Create</a>
</form>
<table class="table table-bordered table-sm">
<tr>
    <th>ID</th><th>Route</th><th>Valid From</th><th>Valid To</th><th>Cost</th><th>Actions</th>
</tr>
{% for t in rows %}
<tr>
    <td>{{ t['id'] }}</td>
    <td>{{ t['origin_name'] }} - {{ t['destination_name'] }}</td>
    <td>{{ t['valid_from'] }}</td>
    <td>{{ t['valid_to'] }}</td>
    <td>{{ t['cost'] }}</td>
    <td>
        <a href="{{ url_for('tariffs.edit_tariff', id=t['id']) }}">Edit</a>
        <form class="inline" method="post" action="{{ url_for('tariffs.delete_tariff', id=t['id']) }}">
            <button type="submit">Delete</button>
        </form>
    </td>
</tr>
{% endfor %}
</table>
{% endblock %}
